(this.webpackJsonpbeedlez=this.webpackJsonpbeedlez||[]).push([[49],{1720:function(e,t,a){"use strict";a.r(t);var n=a(49),r=a(7),i=a.n(r),c=a(26),o=a(13),l=a(41),s=a(0),d=a.n(s),u=a(32),m=a(5),p=a.n(m),b=a(1476),f=a(564),g=a(1495),v=a(15),h=a(217),E=a.n(h),O=a(1480),x=a(1484),y=a(1483),N=a(1479),S=a(1481),j=a(1482),k=a(1494),R=a(30),w=a(21),I=a(101),C=a(221),T=a(382),_=a(174),P=a(27),U=a.n(P),D=Object(b.a)((function(e){return{root:{flexWrap:"wrap"},margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},paperHeading:{padding:"1rem 0rem"},table:{minWidth:650},textMiddle:{verticalAlign:"middle !important"},iconMargin:{margin:"0.5rem",color:"#fff",backgroundColor:"#696969"},iconcolor:{margin:"0.5rem",color:"#fff",backgroundColor:"#0294b3 !important"},headingButton:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"10px"},headingAlignment:Object(l.a)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},"@media (max-width:780px)",{flexDirection:"column",width:"100%",gap:"1rem",justifyContent:"center",textAlign:"center"}),Marginbutton:{margin:"0.5rem"},container:{},paperPaddingRightLeft:{padding:"0rem 1rem"}}}));t.default=function(e){var t=D(),a=Object(s.useState)(!1),r=Object(o.a)(a,2),l=r[0],m=r[1],b=d.a.useState(0),h=Object(o.a)(b,2),P=h[0],H=h[1],A=d.a.useState(10),F=Object(o.a)(A,2),V=F[0],M=F[1],W=Object(s.useState)([]),G=Object(o.a)(W,2),B=G[0],L=G[1],z=Object(s.useState)(""),J=Object(o.a)(z,2),X=(J[0],J[1],Object(s.useState)("")),Y=Object(o.a)(X,2),q=(Y[0],Y[1],Object(s.useState)([])),K=Object(o.a)(q,2),Q=(K[0],K[1]),Z=Object(s.useState)("USER"),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(s.useState)(""),ne=Object(o.a)(ae,2),re=(ne[0],ne[1],Object(s.useState)([])),ie=Object(o.a)(re,2),ce=(ie[0],ie[1]),oe=Object(s.useState)(1),le=Object(o.a)(oe,2),se=(le[0],le[1],Object(s.useState)(90)),de=Object(o.a)(se,2),ue=de[0],me=de[1],pe=Object(s.useState)(10),be=Object(o.a)(pe,2),fe=(be[0],be[1],Object(s.useState)(!0)),ge=Object(o.a)(fe,2),ve=ge[0],he=(ge[1],Object(s.useState)("")),Ee=Object(o.a)(he,2),Oe=Ee[0],xe=(Ee[1],Object(s.useState)("approved")),ye=Object(o.a)(xe,2);ye[0],ye[1];Object(s.useEffect)((function(){var e=U.a.get("type");null!==e&&void 0!==e||U.a.set("type","USER",{expires:365}),te(e),Se()}),[ee]);var Ne=function(){var e=Object(c.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a),console.log({event:t,newPage:a}),Se(a+1,V,ve,Oe),console.log("checkpage"),H(a);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(c.a)(i.a.mark((function e(){var t,a,r,c,o,l,s,d,m,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:1,a=p.length>1&&void 0!==p[1]?p[1]:10,r=!(p.length>2&&void 0!==p[2])||p[2],c=p.length>3&&void 0!==p[3]?p[3]:"",o=p.length>4&&void 0!==p[4]?p[4]:"approved","USER"!==ee){e.next=24;break}return e.prev=6,e.next=9,u.a.get("/private/userList?page=".concat(t,"&limit=").concat(a,"&incomplete=").concat(r,"&search=").concat(c));case 9:l=e.sent,s=l.data,L(Object(n.a)(s.data.docs)),console.log(s.data.docs),ce(Object(n.a)(s.data.docs)),me(s.data.totalDocs),console.log(s.data.docs),console.log("user "),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0);case 22:e.next=41;break;case 24:if("DRIVER"!==ee){e.next=41;break}return e.prev=25,e.next=28,u.a.get("/private/driverList?page=".concat(t,"&limit=").concat(a,"&status=").concat(o,"&search=").concat(c,"&JobStatus=3&serviceType=0"));case 28:d=e.sent,m=d.data,L(Object(n.a)(m.data.docs)),console.log(m.data.docs),ce(Object(n.a)(m.data.docs)),me(m.data.totalDocs),console.log(m.data.docs),console.log("driver"),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(25),console.log(e.t1);case 41:case"end":return e.stop()}}),e,null,[[6,19],[25,38]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"individual"!==t.Notification){e.next=20;break}if(!t.title||!t.description||Object(R.isEmpty)(Fe)){e.next=19;break}return e.prev=3,e.next=6,u.a.post("/private/send-notification",{user_type:"USER"==ee?"user":"driver",user_id:Fe,description:t.description,title:t.title,type:"3"});case 6:v.b.success("Notification sent successfully!",{position:v.b.POSITION.TOP_RIGHT}),t.description="",t.title="",Ie(""),Pe(""),Ae(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:e.next=20;break;case 19:"USER"===ee&&Object(R.isEmpty)(Fe)?v.b.error("Please Select a User",{position:v.b.POSITION.TOP_RIGHT}):"DRIVER"===ee&&Object(R.isEmpty)(Fe)&&v.b.error("Please Select a Driver",{position:v.b.POSITION.TOP_RIGHT});case 20:if("All"!==t.Notification){e.next=36;break}if(!t.title||!t.description){e.next=36;break}return e.prev=22,e.next=25,u.a.post("/private/send-notification",{user_type:"USER"==ee?"user":"driver",user_id:[],description:t.description,title:t.title,type:"4"});case 25:v.b.success("Notification sent successfully!",{position:v.b.POSITION.TOP_RIGHT}),t.description="",t.title="",Ie(""),Pe(""),Ae(""),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(22),console.log(e.t1);case 36:if("Web"!==t.Notification){e.next=52;break}if(!t.title||!t.description){e.next=52;break}return e.prev=38,e.next=41,u.a.post("/private/send-notification",{user_type:"USER"==ee?"user":"driver",user_id:[],description:t.description,title:t.title,type:"5"});case 41:v.b.success("Notification sent successfully!",{position:v.b.POSITION.TOP_RIGHT}),t.description="",t.title="",Ie(""),Pe(""),Ae(""),e.next=52;break;case 49:e.prev=49,e.t2=e.catch(38),console.log(e.t2);case 52:if("Android"!==t.Notification){e.next=68;break}if(!t.title||!t.description){e.next=68;break}return e.prev=54,e.next=57,u.a.post("/private/send-notification",{user_type:"USER"==ee?"user":"driver",user_id:[],description:t.description,title:t.title,type:"1"});case 57:v.b.success("Notification sent successfully!",{position:v.b.POSITION.TOP_RIGHT}),t.description="",t.title="",Ie(""),Pe(""),Ae(""),e.next=68;break;case 65:e.prev=65,e.t3=e.catch(54),console.log(e.t3);case 68:if("iOS"!==t.Notification){e.next=84;break}if(!t.title||!t.description){e.next=84;break}return e.prev=70,e.next=73,u.a.post("/private/send-notification",{user_type:"USER"==ee?"user":"driver",user_id:[],description:t.description,title:t.title,type:"2"});case 73:v.b.success("Notification sent successfully!",{position:v.b.POSITION.TOP_RIGHT}),t.description="",t.title="",Ie(""),Pe(""),Ae(""),e.next=84;break;case 81:e.prev=81,e.t4=e.catch(70),console.log(e.t4);case 84:case"end":return e.stop()}}),e,null,[[3,14],[22,33],[38,49],[54,65],[70,81]])})));return function(t){return e.apply(this,arguments)}}(),ke=d.a.useState([]),Re=Object(o.a)(ke,2),we=Re[0],Ie=Re[1],Ce=d.a.useState([]),Te=Object(o.a)(Ce,2),_e=Te[0],Pe=Te[1],Ue=d.a.useState([]),De=Object(o.a)(Ue,2),He=De[0],Ae=De[1],Fe=[we,_e,He].flat(2).filter((function(e){return""!==e})),Ve=[{label:"USER",value:"USER"},{label:"DRIVER",value:"DRIVER"}];var Me=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,r)}),a)}}((function(e){Se(P,V,ve,e)}));return console.log("dkdkdk",ee),d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"page-content"},d.a.createElement("div",{className:t.root},d.a.createElement(f.a,{elevation:0,style:{backgroundColor:"transparent"}},d.a.createElement("div",{className:p()(t.paperPaddingRightLeft)},d.a.createElement("div",null,d.a.createElement(f.a,{elevation:0,style:{backgroundColor:"transparent"},className:p()(t.paperHeading,t.headingButton)},d.a.createElement("h3",{className:"mb-0"}," "),d.a.createElement("div",{style:{width:"200px"}}," ",d.a.createElement(_.a,{options:Ve,defaultValue:"DRIVER"===U.a.get("type")?Ve[1]:Ve[0],onChange:function(e){te(e.value),U.a.set("type","".concat(e.value),{expires:365}),console.log(e.value)}}))),d.a.createElement(f.a,{elevation:0,style:{backgroundColor:"transparent"}}),d.a.createElement(f.a,{elevation:0,className:t.paperTableHeight},d.a.createElement(N.a,{style:{overflowX:"hidden"}},d.a.createElement(O.a,{stickyHeader:!0},d.a.createElement("div",{className:p()("row with_label",t.borderAll)},d.a.createElement("div",{className:l?p()("col-md-6",t.borderFor):p()("col-md-12",t.borderFor)},d.a.createElement(w.d,{enableReinitialize:!0,initialValues:{title:"",description:"",Notification:""},validate:function(e){return Object(C.a)(e)},validateOnChange:!0,onSubmit:je},(function(e){return d.a.createElement(w.c,null,d.a.createElement("div",null,d.a.createElement(w.b,{name:"title"},(function(t){var a=t.field;return d.a.createElement("div",{className:"form-group mt-4 mx-3"},d.a.createElement("label",{htmlFor:"title"},"Notification Title"),d.a.createElement(I.a,Object.assign({},a,{type:"text",className:"form-control py-5",value:e.values.title,onChange:function(t){console.log(e),e.setFieldValue("title",t.target.value)},error:e.touched.title&&e.errors.title?e.errors.title:null})))}))),d.a.createElement("div",null,d.a.createElement(w.b,{name:"description"},(function(t){var a=t.field;return d.a.createElement("div",{className:"mt-4 mx-3"},d.a.createElement("label",null,"Notification Description"),d.a.createElement(T.a,Object.assign({},a,{type:"text",rows:"10",value:e.values.description,className:"form-control",onChange:function(t){e.setFieldValue("description",t.target.value)},error:e.touched.description&&e.errors.description?e.errors.description:null})))}))),d.a.createElement("div",{className:"d-flex justify-content-around align-items-cente my-4"},d.a.createElement("div",{className:"d-flex mx-2"},d.a.createElement(w.b,{type:"radio",name:"Notification",value:"All",style:{width:20,height:20,borderRadius:5,borderColor:"#d3d3d3",borderStyle:"solid",borderWidth:1,paddingInlineStart:10},onClick:function(){m(!1)}}),d.a.createElement("label",{className:"ml-1"},"All")),d.a.createElement("div",{className:"d-flex"},d.a.createElement(w.b,{type:"radio",name:"Notification",value:"Android",style:{width:20,height:20,borderRadius:5,borderColor:"#d3d3d3",borderStyle:"solid",borderWidth:1,paddingInlineStart:10},onClick:function(){m(!1)}}),d.a.createElement("label",{className:"ml-1"},"Android")),d.a.createElement("div",{className:"d-flex"},d.a.createElement(w.b,{type:"radio",name:"Notification",value:"iOS",style:{width:20,height:20,borderRadius:5,borderColor:"#d3d3d3",borderStyle:"solid",borderWidth:1,paddingInlineStart:10},onClick:function(){m(!1)}}),d.a.createElement("label",{className:"ml-1"},"iOS")),d.a.createElement("div",{className:"d-flex mx-2"},d.a.createElement(w.b,{type:"radio",name:"Notification",value:"individual",style:{width:20,height:20,borderRadius:5,borderColor:"#d3d3d3",borderStyle:"solid",borderWidth:1,paddingInlineStart:10},onClick:function(){m(!0)}}),d.a.createElement("label",{className:"ml-1"},"Individual")),d.a.createElement("div",{style:{color:"red",display:"block"}},e.errors.Notification?e.errors.Notification:null)),d.a.createElement("div",{className:"text-center"},d.a.createElement("button",{type:"submit",style:{backgroundColor:"#006FFF",color:"#fff"},className:"btn"},"Send Notification")),d.a.createElement("br",null),d.a.createElement("br",null))}))),l&&d.a.createElement("div",{className:p()("col-md-6 ",t.borderFor)},d.a.createElement("div",{className:p()(t.container,"mt-4")},d.a.createElement(f.a,{className:t.searchBox},d.a.createElement(E.a,{style:{width:"97%",boxShadow:"none"},placeholder:"USER"===ee?"Search by User Name":"Search by Driver Name",onChange:function(e){return Me(e)},onCancelSearch:function(){Se(P,V,ve,"")},className:t.searchHeight})),d.a.createElement(N.a,{className:p()("mt-3"),style:{overflowY:"scroll",overflowX:"hidden",height:"63vh"}},d.a.createElement(O.a,{stickyHeader:!0},d.a.createElement(S.a,null,d.a.createElement(j.a,null,d.a.createElement(y.a,{className:t.textMiddle}),d.a.createElement(y.a,{className:t.textRight},d.a.createElement("div",null,d.a.createElement("b",{style:{color:"#B0B0B0"}},"Select All"))),d.a.createElement(y.a,{className:t.textMiddle},console.log(B),d.a.createElement(g.a,{color:"primary",indeterminate:we.length>0&&we.length<B.length,checked:B.length>0&&we.length===B.length,onChange:function(e){if(e.target.checked){var t=B.map((function(e){return e._id}));return Ie(t),void Q((function(e){return[].concat(Object(n.a)(e),[we[0]])}))}Ie([])}})))),d.a.createElement(x.a,null,B.map((function(e,a){var n,r=(n=e._id,-1!==we.indexOf(n));return d.a.createElement(j.a,{key:e._id,hover:!0,onClick:function(t){return function(e,t){var a=we.indexOf(t),n=[];-1===a?n=n.concat(we,t):0===a?n=n.concat(we.slice(1)):a===we.length-1?n=n.concat(we.slice(0,-1)):a>0&&(n=n.concat(we.slice(0,a),we.slice(a+1))),Ie(n)}(0,e._id)},role:"checkbox",tabIndex:-1,selected:r},d.a.createElement(y.a,{component:"th",scope:"row",className:t.textMiddle},"DRIVER"==ee?d.a.createElement("img",{src:Object(R.get)(e,"driver.profileImage","https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png"),alt:"profile",style:{width:"30px",height:"30px",borderRadius:"50%"}}):d.a.createElement("img",{src:Object(R.get)(e,"profileImage","https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png"),alt:"profile",style:{width:"30px",height:"30px",borderRadius:"50%"}})),d.a.createElement(y.a,{className:t.textMiddle},"USER"===ee?Object(R.get)(e,"username",""):Object(R.get)(e,"driver.username","")),d.a.createElement(y.a,{className:t.textMiddle},d.a.createElement(g.a,{color:"primary",checked:r})))}))))),d.a.createElement(k.a,{component:"div",count:ue,rowsPerPage:V,page:P,onPageChange:Ne,onRowsPerPageChange:function(e){console.log(+e.target.value),Se(0,e.target.value,ve,Oe),console.log("checkrows"),M(parseInt(e.target.value,10)),console.log({event:e}),H(0)}})))))))))))))}}}]);
//# sourceMappingURL=49.ddf886b2.chunk.js.map